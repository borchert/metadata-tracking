<metadata>
	<idinfo>
		<citation>
			<citeinfo>
				<pubdate>20150922</pubdate>
				<title>Solar Insolation, Minnesota (2006-2012)</title>
				<edition>1</edition>
				<geoform>raster digital data</geoform>
				<lworkcit>
					<citeinfo>
						<title>Minnesota LiDAR Solar Study</title>
						<othercit>This dataset is the primary data product for the Minnesota LiDAR Solar Study. A full description of the project and web mapping application can be viewed at this site. </othercit>
						<onlink>solarp.uspatial.umn.edu</onlink>
					</citeinfo>
				</lworkcit>
				<origin>Brink, Christopher; Gosack, Ben;Kne, Len; Luo, Yuanyuan; Martin, Christopher; McDonald, Molly; Moore, Michael; Munsch, Andrew; Palka, Stephen; Piernot, Devon;Thiede, Dan; Xie, Yiquan; Walz, Andrew</origin>
				<pubinfo>
					<publish>University of Minnesota</publish>
				</pubinfo>
				<onlink>http://dx.doi.org/10.13020/D6X59X</onlink>
			</citeinfo>
		</citation>
		<descript>
			<abstract>The analysis used to produce this dataset looks at geographic location, surface slope, surface aspect, and the effects of shading based on local topography and adjacent structures. A digital surface model was generated from raw LiDAR data. Then, using this DSM, an individual locations on a grid surface were assessed for the amount of direct and indirect radiation that reaches the surface. This analysis was conducted at a 1m resolution for the entire state of Minnesota. </abstract>
			<purpose>The Minnesota Solar Suitability Analysis attempts to provide solar insolation analysis for the entire State of Minnesota. As far as we are aware, it is the only project of its scale in existence; similar studies have been limited to metro areas or focus on rooftop insolation. The project's existence is feasible because of statewide, freely available aerial lidar coverage. And the commitment of the team to work long hours on this unfunded project. The project finds itself at the intersection of renewable energy, big data analysis, geospatial technology, and open data availability. This data provides a measure of incedent solar radiation as it is intercepted by the earth surface, or features (such as vegetation and buildings) standing above the earth surface. The data is intended to be used to assess the suitability of a site for solar panel (photovoltaic cell) installations.</purpose>
			<supplinf>Minnesota</supplinf>
		</descript>
		<status>
			<update>None Planned</update>
			<progress>Complete</progress>
		</status>
		<spdom>
			<bounding>
				<westbc>-97.5</westbc>
				<eastbc>-89</eastbc>
				<northbc>49.5</northbc>
				<southbc>43</southbc>
			</bounding>
		</spdom>
		<keywords>
			<theme>
				<themekt>None</themekt>
				<themekey>Solar Resource</themekey>
			</theme>
			<theme>
				<themekt>ISO 19115 Topic Categories</themekt>
				<themekey>climatologyMeteorologyAtmosphere</themekey>
			</theme>
			<place>
				<placekt>http://lccn.loc.gov/n79021675</placekt>
				<placekey>Minnesota</placekey>
			</place>
			<temporal>
				<tempkt>None</tempkt>
				<tempkey>2008-2012</tempkey>
			</temporal>
		</keywords>
		<accconst>None</accconst>
		<useconst>This data is provided "as is." Exact acccuracy of the data depends on the accuracy of the input LiDAR data, which is variable accross the area. The data provided is an approximation, and may be subject to errors and data anomalies. We provide this data with the understanding that it is not guaranteed to be accurate, correct or complete and conclusions drawn from such information are the responsibility of the user. &lt;/metuc&gt;
		</useconst>
		<datacred>This data was developed by a group of Masters of GIS students at the University of Minnesota.
Group members: Brink, Christopher; Gosack, Ben; Luo, Yuanyuan; Martin, Christopher; McDonald, Molly; Moore, Michael; Munsch, Andrew; Palka, Stephen; Piernot, Devon; Xie, Yiquan; Walz, Andrew. Faculty support and advising from Len Kne and Dan Thiede.</datacred>
		<native> Version 6.2 (Build 9200) ; Esri ArcGIS 10.2.2.3574</native>
		<browse>
			<browsed>]</browsed>
		</browse>
		<crossref>
			<citeinfo>
				<title>Minnesota Lidar data </title>
				<onlink>http://www.mngeo.state.mn.us/chouse/elevation/lidar.html</onlink>
			</citeinfo>
		</crossref>
		<crossref>
			<citeinfo>
				<title>Rooftop solar capacity modeling using GIS within the city of Stillwater, MN</title>
				<onlink>http://digital.library.wisc.edu/1793/68317</onlink>
			</citeinfo>
		</crossref>
		<timeperd>
			<current>See map included as "lidar_collection_projects_dates.pdf" with dates of data collection and areas covered. Also, the included shapefile "lidar_collection_projects_dates_shapefile.zip" includes links to project specific metadata records.

Red River Basin: 2008-2009
South Dakota: Fall 2010
MN River Basin: Spring 2010
Blue Earth County: Spring 2012
Southeast: Fall 2008
Rice: 2007
McLeod 2007
Metro: Spring and Fall 2011
Stearns: 2006
Crow Wing: 2008
Central Lakes: Spring 2012
Arrowhead: Spring 2011
Pine: 2006
Chisago: 2007
Wright: 2008
			</current>
			<timeinfo>
				<sngdate>
					<caldate>2012</caldate>
				</sngdate>
			</timeinfo>
		</timeperd>
		<ptcontac>
			<cntinfo>
				<cntperp>
					<cntorg>U-Spatial - Support for Spatial Research, University of Minnesota</cntorg>
					<cntper>U-Spatial Help Desk</cntper>
				</cntperp>
				<cntaddr>
					<addrtype>physical</addrtype>
					<address>420 Blegen Hall, 269 19th Avenue S</address>
					<city>Minneapolis</city>
					<state>Minnesota</state>
					<postal>55455</postal>
				</cntaddr>
				<cntvoice>612-624-7591</cntvoice>
				<cntemail>uspatial@umn.edu</cntemail>
			</cntinfo>
		</ptcontac>
	</idinfo>
	<dataqual>
		<logic>Visual assessments have been made to the data to assure that they meet expected results. Due to variation in input data including differing collection methods and data collection specificationsm, significant variation can be found in the quality of the output generated. Prior to use, a thorough inspection of the region of interest should be made to ensure that it is free of anamolies or inconsistancies. Examples of data anomolies and errors can be found at the project website (solar.uspatial.umn.edu).</logic>
		<lineage>
			<procstep>
				<procdesc>There have been several previous studies using lidar to determine solar output, including David Brandt's 2013 study (freely available at http://digital.library.wisc.edu/1793/68317) which analyzes the potential for lidar-derived solar insolation in Stillwater, Minnesota. Brandt&#8217;s study provides much of the contextual methods for the statewide study. The Solar Suitability Analysis methods holistically follows Brandt&#8217;s methods; however, scaled to a statewide extent. 

The sheer size of the data is daunting. The Digital Surface Model (DSM) and solar analysis, derived from the lidar point clouds, are broken into 220,165 one square kilometer tiles, processed, and then pieced together again. Initial estimations indicated that the processing required would have taken roughly five years to complete if run on a single computer. However through the clever (and harmonious) use of spatial software, a parallel processing workflow was created to overcome these challenges and process the entire state much quicker in a few days. The workflow used Minnesota Supercomputing Institute high performance computing resources, as well as an entire labs of desktop computers.

Lidar Data
Lidar is a form of active remote sensing technology that uses light pulses, most commonly in the near-infrared wavelengths, to collected surface elevation data. A laser scanner, mounted in an aircraft and combined with high-accuracy GPS, collects light returns that are interpolated into a point cloud. Each point represents one return from a laser pulse. The laser pulse has the ability to penetrate vegetation, multiple laser returns can be gathered for each pulse including the returns from below the vegetation.The accuracy of lidar returns allow for a unique, multi-faceted analytical dataset. In regards to calculating solar insolation, the first point returns can be used to interpolate a topology of Minnesota that models the objects (i.e. building, trees, etc) and geography resting upon the terrain. 

The lidar point files for the state of Minnesota used in the study were collected between 2006 and 2012 through an intergovernmental initiative with the primary object of providing improved elevation data for flood mapping. In some regions, existing lidar data was acquired and transformed to new state standards. Areas where data did not exist or could not be transformed, were collected by contracted vendors. The composite data forms a seamless coverage of the state with a resolutions of at least 1.5 meters. Refer to the metadata for the state lidar dataset for full details.

Seven counties (Stearns, Crow Wing, Pine, Wright, Chisago, McLeod, and Rice) required additional processing of the lidar data to create the DSM. Because the original intent of the lidar flights was to track hydrology, only bare-earth points were needed and the rest of the unclassified points were discarded. The data provided by these counties was either missing full classification of Lidar points other than "ground" (buildings, vegetations, etc), or the non-ground point returns were removed entirely. 

Initial processing done by the project ignored unclassified points, resulting in a digital surface model devoid of non-ground features in these areas and creating county-wide swaths with no shading that were unsuitable for solar processing. The unclassified, &#8220;raw&#8221; lidar datasets were obtained for Stearns and Wright counties. Additionally, the unclassified points, initially discarded, were found present in Crow Wing and Pine counties. No above ground points were found in the Chisago, McLeod, and Rice county files and thus will require new data to be collected before solar potential can be calculated. The lidar point cloud files for Stearns, Crow Wing, Pine, and Wright counties were reclassified and processed. Below is a table that summarizes the various issues with the re-processed and unprocessed counties.

County Name	Data Issues	Corrections and Solutions.	Reprocessed (Y/N)
Chisago	Ground returns only w/ other points removed. New data needed.	New data needed.	N
Crow Wing	Ground returns are only points classified. Other features exist but are not classified.	Delineate tiles to reprocess, remove noise, and reclassify.	Y
McLeod	Ground returns only w/ other points removed. New data needed.	New data needed.	N
Pine	Ground returns are only points classified. Other features exist but are not classified. Data includes a class &#8220;10&#8221; for overlap instead of class &#8220;12&#8221; that causes stripping.	Delineate tiles to reprocess, remove noise, add reclassify &#8220;10&#8221; to &#8220;12.&#8221;.	Y
Rice	Ground returns are only points classified. Other features exist but are not classified.	New data needed.	N
Stearns	No non-ground returns exist. Replacement flight data obtained with no classification.	Delineate replacement tiles to reprocess, remove noise, and reclassify.	Y
Wright	Ground returns are only points classified. Other features exist but are not classified. Data has large blank areas caused by cropping to county lines.	Delineate tiles to reprocess, remove noise, and reclassify.	Y



The reclassified counties differ from the original, pre-classified counties in the number of lidar point returns. The pre-classified counties have fewer point returns due to the professional processing they received. This can be observed in the forested areas where the solar insolation viewshed reaches to the forest floor; the reprocessed counties measures the solar insolation from the top of the tree canopy because the density of points (the tree branches) acts as a surface for the viewshed analysis in densely forested areas. The results show deceptively positive insolation values in heavily forested areas of the reprocessed counties. The point density could be corrected using the algorithms used during the initial processing (this is beyond the scope of this project). Additionally, the projects highly recommends that any future Lidar flights flown over Minnesota be processed using all points collected and not just the bare-earth points.

The processing of such a large dataset inevitably led to a small number of corrupt insulation tiles. These tiles are present throughout the insolation model and are mostly unavoidable due to the processing structure of the project. These tiles can easily be reprocessed; however, locating them is a time consuming effort. A notification tool has been built into the web app to assist in locating bad tiles.

Digital Surface Model Creation
Before the Solar Analysis process could take place, a Digital Surface Model (DSM) was created to represent the terrain and all object present on that terrain. This included buildings, tree cover, roads, and other natural and human-altered landscapes. In effect, the DSM is a three dimensional representation of Minnesota. It was generated using a Streaming Delauney Triangulation process through rapidlasso&#8217;s LAStools software package. In this process, triangles are iteratively generated using nearby lidar returns and values for each point are determined by extracting interpolated elevation from the surface of the triangle. The result is a 1 meter resolution raster covering the state.

Solar Radiation Analysis
The Solar Radiation Analysis was completed using Esri ArcGIS Spatial Analyst software via Python programming and the ArcPy package. The Area Solar Radiation tool allows the user to input a Digital Surface Model to analyze the landscape and the sun's path across the sky throughout the day and through the year. This analysis measures the amount of incoming direct and diffuse solar radiation for any particular place on a landscape. It does not include reflected radiation as a factor. 
For Solar Suitability analysis, these calculations are repeated for every square meter across Minnesota. For each meter in the output raster, the Area Solar Radiation tool utilizes the DSM to create a sky obstruction view. This sky obstruction view is an upward facing circular view depicting the portion of the sky visible at this location. The skyview limits the amount of area direct radiation can be captured by looking at the elevation of nearby features such as trees, buildings, and hills. Next, maps of the sun&#8217;s position and direct radiation throughout the day and the year (sunmaps) and directional diffuse radiation for each sky sector (skymaps) are taken into consideration for each square meter. The sunmaps and skymaps are adjusted for the range of latitudes in Minnesota. Direct radiation combined with diffuse radiation, constrained to the viewshed and calculated (represented above), yields total solar insolation for each one meter cell measured in watt-hours per meter squared.

The following parameters were used with the Area Solar Radiation Tool.
sky_size = 100
calculation_directions = 32
zenith_divisions = 8
azimuth_divisions = 8
diffuse_proportion = 0.3
transmissivity = 0.5
day_interval = '' # with whole year analysis default is calendar month
hour_interval = '' # default is 0.5
each_interval = '' # default is no interval (i.e. a single band for whole year)
z_factor = '' # meters for both units, defaults to 1
slope_aspect_input_type = 'FROM_DEM' # how slope/aspect are determined
calculation_directions = int(config.get('solar_analyst','calculation_directions')) # number of directions used when calculating viewshed (multiple of 8 only)
zenith_divisions = int(config.get('solar_analyst','zenith_divisions')) # number of divisions to create sky sectors in sky map
azimuth_divisions = int(config.get('solar_analyst','azimuth_divisions')) # number of divisions to create sky sectors in sky map
diffuse_model_type = 'UNIFORM_SKY' # type of diffuse radiation model
diffuse_proportion = float(config.get('solar_analyst','diffuse_proportion')) # proportion of radiation that is diffuse
transmissivity = float(config.get('solar_analyst','transmissivity')) # fraction of radiation passing through atmosphere (0.5 for generally clear sky)
out_direct_radiation_raster = '' # optional output - direct radiation
out_diffuse_radiation_raster = '' # optional output - diffuse radiation
out_direct_duration_raster = '' # optional output - direct duration


To date, there has been no attempt to systematically verify the validity of the solar insolation model through groundtruthing. 

More information can be found on the project website at http://solar.maps.umn.edu.</procdesc>
			</procstep>
		</lineage>
		<complete>The input data used for development is LiDAR data collected by the State of Minnesota Dept. of Natural Resources in cooperation with a number of other local, regional and federal agencies and organizations. These data collects have been aggregated for the state of Minnesota and distributed to the public by the Minnesota Geospatial Information Office (www.mngeo.state.mn.us).</complete>
		<attracc>
			<attraccr>As of 29 June 2015, no groundtruthing has been done to assess the accuracy of the predicted WH/m^2 values.</attraccr>
		</attracc>
	</dataqual>
	<spdoinfo>
		<direct>Raster</direct>
		<rastinfo>
			<rasttype>Grid Cell</rasttype>
			<rowcount>1</rowcount>
			<colcount>1</colcount>
		</rastinfo>
	</spdoinfo>
	<spref>
		<horizsys>
			<planar>
				<mapproj>
					<mapprojn>NAD 1983 UTM Zone 15N</mapprojn>
					<transmer>
						<sfctrmer>0.9996</sfctrmer>
						<longcm>-93.0</longcm>
						<latprjo>0.0</latprjo>
						<feast>500000.0</feast>
						<fnorth>0.0</fnorth>
					</transmer>
				</mapproj>
				<planci>
					<plance>coordinate pair</plance>
					<coordrep>
						<absres>1</absres>
						<ordres>1</ordres>
					</coordrep>
					<plandu>meter</plandu>
				</planci>
			</planar>
			<geodetic>
				<horizdn>D North American 1983</horizdn>
				<ellips>GRS 1980</ellips>
				<semiaxis>6378137.0</semiaxis>
				<denflat>298.257222101</denflat>
			</geodetic>
		</horizsys>
	</spref>
	<distinfo>
		<distliab>See access and use constraints information.</distliab>
		<resdesc>doi:10.13020/D6X59X</resdesc>
		<distrib>
			<cntinfo>
				<cntperp>
					<cntorg>University of Minnesota</cntorg>
					<cntper>Kevin Dyke</cntper>
				</cntperp>
				<cntpos>Spatial Data Analyst/Curator</cntpos>
				<cntaddr>
					<addrtype>mailing and physical</addrtype>
					<address>309 19th Ave S, S76 O Meredith Wilson Library</address>
					<city>Minneapolis</city>
					<state>MN</state>
					<postal>55455</postal>
				</cntaddr>
				<cntvoice>612-301-3932</cntvoice>
				<cntemail>kevindyke@umn.edu</cntemail>
			</cntinfo>
		</distrib>
	</distinfo>
	<metainfo>
		<metd>20150629</metd>
		<metstdn>Minnesota Geographic Metadata Guidelines</metstdn>
		<metstdv>1.2</metstdv>
		<mettc>local time</mettc>
		<metuc>This data is provided "as is." Exact acccuracy of the data depends on the accuracy of the input LiDAR data, which is variable accross the area. The data provided is an approximation, and may be subject to errors and data anomalies. We provide this data with the understanding that it is not guaranteed to be accurate, correct or complete and conclusions drawn from such information are the responsibility of the user. </metuc>
		<metextns>
			<onlink>http://www.mngeo.state.mn.us/committee/standards/mgmg/metadata.htm</onlink>
		</metextns>
		<metc>
			<cntinfo>
				<cntperp>
					<cntorg>University of Minnesota</cntorg>
					<cntper>Kevin Dyke</cntper>
				</cntperp>
				<cntpos>Spatial Data Analyst/Curator</cntpos>
				<cntaddr>
					<addrtype>mailing and physical</addrtype>
					<address>309 19th Ave S, S76 O Meredith Wilson Library</address>
					<city>Minneapolis</city>
					<state>MN</state>
					<postal>55455</postal>
				</cntaddr>
				<cntvoice>612-301-3932</cntvoice>
				<cntemail>kevindyke@umn.edu</cntemail>
			</cntinfo>
		</metc>
	</metainfo>
	<eainfo>
		<overview>
			<eaover>The raster value is a measure of total incoming solar radiation in watt hours per meter squared (WH/m^2).</eaover>
		</overview>
	</eainfo>
</metadata>
